<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dizi Hayal - Lazy Loading مع المزيد للوصف</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:'Cairo',sans-serif;
    -webkit-tap-highlight-color: transparent;
}

body{
    background:#0b0f1a;
    color:#fff;
    padding-bottom:80px;
}

.search-bar{
    position:sticky;
    top:0;
    background:#0b0f1a;
    padding:12px;
    z-index:10;
}

.search-bar input{
    width:100%;
    padding:12px 14px;
    border-radius:14px;
    border:none;
    outline:none;
    background:#151a2d;
    color:#fff;
}

.filter-bar{
    display:flex;
    gap:10px;
    padding:12px;
    overflow-x:auto;
}

.filter-btn{
    padding:6px 14px;
    border:2px solid red;
    border-radius:14px;
    white-space:nowrap;
    cursor:pointer;
    background:transparent;
    color:#fff;
    transition:0.2s;
}

.filter-btn.active{
    background:red;
    color:#fff;
}

.card{
    position:relative;
    margin-bottom:12px;
    border-radius:22px;
    overflow:hidden;
    box-shadow:0 15px 40px rgba(0,0,0,.55);
}

.card-bg{
    position:absolute;
    inset:0;
    background-size:cover;
    background-position:center;
    filter: blur(18px) brightness(.5);
    transform:scale(1.2);
}

.card-overlay{
    position:absolute;
    inset:0;
    background:linear-gradient(to left, rgba(10,15,30,.95), rgba(10,15,30,.75), rgba(10,15,30,.95));
}

.card-inner{
    position:relative;
    display:flex;
    gap:14px;
    padding:14px;
}

.card-img{
    width:110px;
    aspect-ratio:2/3;
    background-size:cover;
    background-position:center;
    border-radius:16px;
    position:relative;
    flex-shrink:0;
    box-shadow:0 8px 20px rgba(0,0,0,.6);
}

.play{
    position:absolute;
    bottom:10px;
    left:50%;
    transform:translateX(-50%);
    width:42px;
    height:42px;
    background:rgba(0,0,0,.6);
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:18px;
}

.card-content{
    flex:1;
}

.card-content h3{
    font-size:16px;
    margin-bottom:8px;
}

.tags{
    display:flex;
    flex-wrap:wrap;
    gap:6px;
    margin-bottom:8px;
}

.tag{
    padding:4px 10px;
    font-size:12px;
    border-radius:999px;
    background:rgba(255,255,255,.08);
}

.tag.red{background:#e50914;}
.tag.purple{background:#7a4dff;}
.tag.green{background:#1db954;}

.rating{
    display:flex;
    align-items:center;
    gap:8px;
    margin-bottom:8px;
}

.stars{
    color:#f5c542;
    font-size:14px;
}

.score{
    background:#1f253d;
    padding:4px 8px;
    border-radius:10px;
    font-size:12px;
}

.desc{
    font-size:13px;
    opacity:.85;
    line-height:1.5;
    overflow:hidden;
}

.desc-short{
    display:inline;
}

.more-link{
    font-size:11px;
    color:#bbb;
    cursor:pointer;
    margin-left:5px;
}

.load-more{
    text-align:center;
    padding:8px;
    margin:12px;
    border:2px solid #e50914;
    border-radius:14px;
    cursor:pointer;
    color:#e50914;
    font-weight:bold;
    font-size:14px;
    transition:0.2s;
}

.load-more:hover{
    background:#e50914;
    color:#fff;
}

.bottom-nav{
    position:fixed;
    bottom:0;
    width:100%;
    height:65px;
    background:#0b0f1a;
    border-top:1px solid #1a2040;
    display:flex;
    justify-content:space-around;
    align-items:center;
}

.bottom-nav div{
    font-size:12px;
    opacity:.6;
}

.bottom-nav .active{
    color:#e50914;
    opacity:1;
}
</style>
</head>
<body>

<div class="search-bar">
    <input type="text" placeholder="يمكن البحث عن المسلسلات والافلام ، للكبار ، عراقي">
</div>

<div class="filter-bar" id="filterBar"></div>
<div id="sections-container"></div>
<div id="loadMoreBtn" class="load-more">المزيد</div>

<script>
// ===== الفلاتر =====
const filters = ["الاحدث","مسلسلات","أفلام","أفلام للكبار","العراق للكبار","للكبار"];

// ===== البيانات الحقيقية =====
let items = [
  {
  title: "كوموتوزو",
  img: "https://f.top4top.io/p_3674l5hvt1.jpg",
  type: "للـكبار",
  quality: "1080p",
  genre: "رومنسي / دراما",
  year: 2022,
  rating: 6.8,
  stars: "★ ★ ★ ☆ ☆",
  desc: "محتوى للكبار لاتظغط للفيديو ",
  filter: ["الاحدث","للكبار"],
  searchKeys: ["365 Days", "حب", "فيلم رومانسي", "فيلم 2022"],
  link: "https://nexuslnvi.com/s/2014256360916787201"
},
  {
  title: "365 Days",
  img: "https://k.top4top.io/p_36741uipt1.jpg",
  type: "فيلم",
  quality: "1080p",
  genre: "رومنسي / دراما",
  year: 2022,
  rating: 6.8,
  stars: "★ ★ ★ ☆ ☆",
  desc: "فيلم رومانسي درامي يحكي قصة حب مشوقة مليئة بالتحديات والمغامرات.",
  filter: ["الاحدث","أفلام","أفلام للكبار"],
  searchKeys: ["365 Days","حب","فيلم رومانسي","فيلم 2022"],
  link: "https://nexuslnvi.com/s/2014253008766005250"
},
  {
  title: "Fall for Me",
  img: "https://k.top4top.io/p_36748ejer1.jpg",
  type: "فيلم",
  quality: "1080p",
  genre: "رومنسي",
  year: 2025,
  rating: 7.5,
  stars: "★ ★ ★ ☆ ☆",
  desc: "فيلم رومانسي يحكي قصة حب مؤثرة ومليئة بالمفاجآت.",
  filter: ["الاحدث","أفلام","أفلام للكبار"],
  searchKeys: ["Fall for Me","حب","فلتقع في شباكي","فيلم 2023"],
  link: "https://example.com/fall-for-me"
},
  {
  title: "BLONDE",
  img: "https://i.top4top.io/p_3672eyvoz1.jpg",
  type: "فيلم",
  quality: "1080p",
  genre: "دراما",
  year: 2022,
  rating: 7.2,
  stars: "★ ★ ★ ☆ ☆",
  desc: "دراما تحكي قصة حياة مارلين مونرو بتفاصيل مؤثرة ومثيرة.",
  filter: ["الاحدث","أفلام","أفلام "],
  searchKeys: ["BLONDE","مارلين مونرو","فيلم الشقراء","فيلم 2022"],
  link: "https://nexuslnvi.com/s/2013648896055734274"
},
  {
  title: "IN TIME",
  img: "https://i.top4top.io/p_3671k1vu31.jpg",
  type: "فيلم",
  quality: "1080p",
  genre: "خيال علمي",
  year: 2011, // يمكنك تعديل السنة إذا أردت
  rating: 6.7,
  stars: "★ ★ ★ ☆ ☆",
  desc: "شخص يعيش في عالم يتحكم بالوقت ويقاتل للبقاء على قيد الحياة.",
  filter: ["الاحدث", "أفلام","في الوقت الحالي",],
  searchKeys: ["IN TIME", "فيلم الوقت", "خيال علمي"],
  link: "https://nexuslnvi.com/s/2013618364349571074"
},
{
  title: "THE QUEEN'S GAMBIT",
  img: "https://i.top4top.io/p_36728w3ku1.jpg",
  type: "مسلسل",
  quality: "1080p",
  genre: "دراما",
  year: 2020,
  rating: 8.9,
  stars: "★ ★ ★ ★ ★",
  desc: "تتبع سلسلة الأحداث قصة فتاة شابة في لعبة بيت هارمون، تسعى لتحقيق أحلامها في عالم تنافسي مليء بالتحديات والإدمان. مسلسل درامي",
  filter: ["الاحدث","مسلسلات","مسلسلات"],
  searchKeys: ["THE QUEEN'S GAMBIT","QUEEN'S GAMBIT","مناورة الملكة","مسلسل 2020"],
  link: "https://nexuslnvi.com/s/2013647335686557698"
}

];

// ===== lazy loading =====
let currentIndex = 0;
const itemsPerLoad = 20;
let currentFilter = null;

const container = document.getElementById("sections-container");
const loadMoreBtn = document.getElementById("loadMoreBtn");

// إنشاء الكرت
function createCard(item){
    const card = document.createElement("div");
    card.classList.add("card");

    // تحديد إذا كان الوصف طويل
    const maxLength = 80;
    let shortDesc = item.desc.length > maxLength ? item.desc.slice(0,maxLength) + "..." : item.desc;
    let isLong = item.desc.length > maxLength;

    card.innerHTML = `
        <div class="card-bg" style="background-image:url('${item.img}')"></div>
        <div class="card-overlay"></div>
  
            </div>
            <div class="card-content">
                <h3>${item.title}</h3>
                <div class="tags">
                    <div class="tag red">${item.type}</div>
                    <div class="tag purple">${item.quality}</div>
                    <div class="tag green">${item.genre}</div>
                </div>
                <div class="rating">
                    <div class="stars">${item.stars}</div>
                    <div class="score">${item.rating}</div>
                </div>
                <div class="desc">
                    <span class="desc-short">${shortDesc}</span>
                    ${isLong ? `<span class="more-link">المزيد</span>` : ""}
                </div>
            </div>
        </div>
    `;

    // حدث الضغط على "المزيد"
    if(isLong){
        const moreLink = card.querySelector(".more-link");
        const descSpan = card.querySelector(".desc-short");
        moreLink.addEventListener("click", () => {
            descSpan.textContent = item.desc;
            moreLink.style.display = "none";
        });
    }

    container.appendChild(card);
}

// تحميل العناصر تدريجيًا
function loadItems(){
    let count = 0;
    while(currentIndex < items.length && count < itemsPerLoad){
        const item = items[currentIndex];
        if(!currentFilter || item.filter.includes(currentFilter)){
            createCard(item);
            count++;
        }
        currentIndex++;
    }
    loadMoreBtn.style.display = (currentIndex >= items.length) ? "none" : "block";
}

// زر المزيد
loadMoreBtn.addEventListener("click", loadItems);

// ===== إنشاء أزرار الفلتر =====
const filterBar = document.getElementById("filterBar");
filters.forEach(f => {
    const btn = document.createElement("div");
    btn.classList.add("filter-btn");
    btn.textContent = f;
    btn.addEventListener("click", () => {
        document.querySelectorAll(".filter-btn").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        currentFilter = f;
        currentIndex = 0;
        container.innerHTML = "";
        loadItems();
    });
    filterBar.appendChild(btn);
});

// تحميل أول دفعة عند الصفحة
loadItems();

const searchInput = document.querySelector(".search-bar input");

searchInput.addEventListener("input", () => {
    const query = searchInput.value.trim().toLowerCase();
    currentIndex = 0;
    container.innerHTML = "";

    // فلترة حسب البحث والفلاتر
    const filteredItems = items.filter(item => {
        const matchesFilter = !currentFilter || item.filter.includes(currentFilter);
        const matchesSearch = query === "" || 
            item.title.toLowerCase().includes(query) ||
            (item.searchKeys && item.searchKeys.some(k => k.toLowerCase().includes(query)));
        return matchesFilter && matchesSearch;
    });

    // إعادة تحميل العناصر من البداية بناءً على البحث
    loadItemsFromArray(filteredItems);
});

// تعديل دالة loadItems لتقبل مصفوفة معينة
function loadItemsFromArray(arr){
    let count = 0;
    while(currentIndex < arr.length && count < itemsPerLoad){
        createCard(arr[currentIndex]);
        count++;
        currentIndex++;
    }
    loadMoreBtn.style.display = (currentIndex >= arr.length) ? "none" : "block";
}

function createCard(item){
    const card = document.createElement("div");
    card.classList.add("card");

    // تحديد إذا كان الوصف طويل
    const maxLength = 80;
    let shortDesc = item.desc.length > maxLength ? item.desc.slice(0,maxLength) + "..." : item.desc;
    let isLong = item.desc.length > maxLength;

card.innerHTML = `
    <div class="card-bg" style="background-image:url('${item.img}')"></div>
    <div class="card-overlay"></div>
    <div class="card-inner">
        <div class="card-img" style="background-image:url('${item.img}')">
            <!-- أيقونة التشغيل تم حذفها -->
        </div>
        <div class="card-content">
            <h3>${item.title}</h3>
            <div class="tags">
                <div class="tag red">${item.type}</div>
                <div class="tag purple">${item.quality}</div>
                <div class="tag green">${item.genre}</div>
            </div>
            <div class="rating">
                <div class="stars">${item.stars}</div>
                <div class="score">${item.rating}</div>
            </div>
            <div class="desc">
                <span class="desc-short">${shortDesc}</span>
                ${isLong ? `<span class="more-link">المزيد</span>` : ""}
            </div>
        </div>
    </div>
`;

    // فتح الرابط عند الضغط على الكرت
    if(item.link){
        card.style.cursor = "pointer";
        card.addEventListener("click", () => {
            window.open(item.link, "_blank"); // يفتح الرابط في تبويب جديد
        });
    }

    // حدث الضغط على "المزيد"
    if(isLong){
        const moreLink = card.querySelector(".more-link");
        const descSpan = card.querySelector(".desc-short");
        moreLink.addEventListener("click", (e) => {
            e.stopPropagation(); // منع فتح الرابط عند الضغط على المزيد
            descSpan.textContent = item.desc;
            moreLink.style.display = "none";
        });
    }

    container.appendChild(card);
}


</script>
</body>
</html>
